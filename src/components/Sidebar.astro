---
const navigation = [
	{ href: '/', label: 'Start', icon: 'home' },
	{ href: '/hero', label: 'Hero', icon: 'layout' },
	{ href: '/cta', label: 'CTA', icon: 'cursor-click' },
	{ href: '/services', label: 'Services', icon: 'server' },
	{ href: '/testimonials', label: 'Testimonials', icon: 'chat' },
	{ href: '/features', label: 'Features', icon: 'sparkles' },
	{ href: '/pricing', label: 'Pricing', icon: 'currency-dollar' },
	{ href: '/faq', label: 'FAQ', icon: 'question-mark-circle' },
	{ href: '/contact', label: 'Contact', icon: 'mail' },
	{ href: '/footer', label: 'Footer', icon: 'document-text' },
];
const { pathname } = Astro.url;
---

<!-- Overlay dla tła przy otwartym menu na urządzeniach mobilnych -->
<div id="sidebar-overlay" class="fixed inset-0 bg-gray-800 bg-opacity-50 z-30 hidden" aria-hidden="true"></div>

<aside
	id="sidebar"
	class="fixed top-16 left-0 z-50 w-64 h-[calc(100vh-4rem)] transition-transform -translate-x-full md:translate-x-0 bg-white border-r border-gray-200 shadow-sm">
	<div class="h-full overflow-y-auto py-5 px-3">
		<div class="space-y-2">
			{
				navigation.map(({ href, label, icon }) => {
					const isActive = pathname === href;
					return (
						<a
							href={href}
							class={`flex items-center p-3 text-base font-medium rounded-lg group transition-all duration-200 ${
								isActive ? 'bg-blue-50 text-blue-700' : 'text-gray-700 hover:bg-gray-100'
							}`}>
							<div
								class={`w-6 h-6 flex items-center justify-center mr-3 ${isActive ? 'text-blue-700' : 'text-gray-500'}`}>
								{icon === 'home' && (
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="18"
										height="18"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round">
										<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
										<polyline points="9 22 9 12 15 12 15 22" />
									</svg>
								)}
								{icon === 'layout' && (
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="18"
										height="18"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round">
										<rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
										<line x1="3" y1="9" x2="21" y2="9" />
										<line x1="9" y1="21" x2="9" y2="9" />
									</svg>
								)}
								{icon === 'mouse-pointer' && (
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="18"
										height="18"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round">
										<path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z" />
										<path d="M13 13l6 6" />
									</svg>
								)}
								{icon === 'briefcase' && (
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="18"
										height="18"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round">
										<rect x="2" y="7" width="20" height="14" rx="2" ry="2" />
										<path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" />
									</svg>
								)}
								{icon === 'message-circle' && (
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="18"
										height="18"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round">
										<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" />
									</svg>
								)}
							</div>
							<span class="flex-1">{label}</span>
							{isActive && (
								<span class="inline-flex items-center justify-center w-2 h-2 rounded-full bg-blue-600 ml-2" />
							)}
						</a>
					);
				})
			}
		</div>

		<div class="pt-5 mt-5 space-y-2 border-t border-gray-200">
			<a
				href="https://github.com/MatPawluk/MaTail"
				target="_blank"
				class="flex items-center p-3 text-base font-medium text-gray-700 rounded-lg hover:bg-gray-100 group transition-all duration-200">
				<div class="w-6 h-6 flex items-center justify-center mr-3 text-gray-500">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						width="18"
						height="18"
						viewBox="0 0 24 24"
						fill="none"
						stroke="currentColor"
						stroke-width="2"
						stroke-linecap="round"
						stroke-linejoin="round">
						<path
							d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"
						></path>
					</svg>
				</div>
				<span class="flex-1">GitHub</span>
			</a>
			<a
				href="#documentation"
				class="flex items-center p-3 text-base font-medium text-gray-700 rounded-lg hover:bg-gray-100 group transition-all duration-200">
				<div class="w-6 h-6 flex items-center justify-center mr-3 text-gray-500">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						width="18"
						height="18"
						viewBox="0 0 24 24"
						fill="none"
						stroke="currentColor"
						stroke-width="2"
						stroke-linecap="round"
						stroke-linejoin="round">
						<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
						<path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
					</svg>
				</div>
				<span class="flex-1">Dokumentacja</span>
			</a>
		</div>
	</div>
</aside>

<style>
	/* Dodatkowe style dla poprawnej obsługi sidebara na mobilnych */
	#sidebar {
		visibility: visible !important;
		display: block !important;
		background-color: white;
		z-index: 50;
		color: #1f2937;
	}

	#sidebar div,
	#sidebar a,
	#sidebar span,
	#sidebar svg {
		visibility: visible !important;
		display: block !important;
		color: inherit;
	}

	#sidebar a {
		display: flex !important;
	}

	#sidebar span {
		display: inline-block !important;
	}

	#sidebar svg {
		display: inline-block !important;
	}

	@media (max-width: 768px) {
		#sidebar {
			width: 80%; /* Na mobilnych sidebar może być szerszy */
			max-width: 300px;
			box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
		}

		#sidebar a,
		#sidebar div {
			color: #1f2937;
			background-color: white;
		}

		#sidebar a.text-gray-700 {
			color: #374151 !important;
		}

		#sidebar a.text-blue-700 {
			color: #1d4ed8 !important;
		}
	}
</style>

<script>
	// Dodatkowy skrypt dla poprawnego wyświetlania zawartości sidebara
	document.addEventListener('DOMContentLoaded', function () {
		const sidebar = document.getElementById('sidebar');

		if (sidebar) {
			// Upewnij się, że wszystkie elementy sidebara są widoczne
			const allElements = sidebar.querySelectorAll('*');
			allElements.forEach(element => {
				const htmlElement = element as HTMLElement;
				htmlElement.style.visibility = 'visible';
				if (htmlElement.tagName === 'A') {
					htmlElement.style.display = 'flex';
				} else if (htmlElement.tagName === 'SPAN') {
					htmlElement.style.display = 'inline-block';
				} else if (htmlElement.tagName === 'SVG') {
					htmlElement.style.display = 'inline-block';
				} else {
					htmlElement.style.display = 'block';
				}
			});
		}
	});
</script>
